<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript">
        var clevertap = { event: [], profile: [], account: [], onUserLogin: [], notifications: [], privacy: [] };
        // replace with the CLEVERTAP_ACCOUNT_ID with the actual ACCOUNT ID value from your Dashboard -> Settings page
        clevertap.account.push({ "id": "TEST-865-ZRW-7K7Z" });
        clevertap.privacy.push({ optOut: false }); //set the flag to true, if the user of the device opts out of sharing their data
        clevertap.privacy.push({ useIP: true }); //set the flag to true, if the user agrees to share their IP data
        (function () {
            var wzrk = document.createElement('script');
            wzrk.type = 'text/javascript';
            wzrk.async = true;
            wzrk.src = ('https:' == document.location.protocol ? 'https://d2r1yp2w7bby2u.cloudfront.net' : 'http://static.clevertap.com') + '/js/clevertap.min.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(wzrk, s);
        })();
    </script>

    <title>Clevertap Web SDK</title>
</head>

<body>
    <h3> This is CT Page. </h3>
    <button type="button" id="btn1" onClick="viewProduct()"> View Product </button>
    <button type="button" id="btn2" onClick="onSubscribe()"> Subscribe </button>


    <div id="container">
        <div class="close">&times;</div>
        <img
            src="https://img.freepik.com/free-photo/young-gowoman-yellow-leather-jacket-copy-space_23-2148674153.jpg?w=2000" />
        <div class="message">
            Hello <span id="user-name">user</span>,
            <p>Still thinking about the <span id="product-name">item</span> in your cart?</p>
            <p>We get it - it's fabulous.</p>
            <p>Use SALE20 and avail 20% off</p>
            <p>What are you waiting for??</p>
        </div>
    </div>


</body>

<script type="text/javascript">
    function renderCartDropOffPersonalisationCampaign(data) {
        const name = data.kv.Name;
        const product = data.kv.Cart;
        const containerEl = document.getElementById('container')
        const userNameEl = containerEl.querySelector('#user-name')
        usernameEl.innerText = name
        const productNameEl = containerEl.querySelector('#product-name')
        productNameEl.innerText = product
    }
    document.addEventListener("CT_web_native_display", function (event) {
        console.log(event);
        const data = event.detail
        renderCartDropOffPersonalisationCampaign(data);
    });
</script>

<script type="text/javascript">
    if (ServiceWorker in navigator) {
        navigator.serviceWorker
            .register("clevertap_sw.js")
            .then(function (registration) {
                console.log("Service Worker Registered");
                console.log(registration);
            })
            .catch(function (error) {
                console.log("Service Worker Registration Failed");
                console.log(error);
            });
    }
</script>
<script src="./script.js" type="text/javascript"> </script>

</html>